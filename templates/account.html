{% import "controls.html" as controls %}
{% import "forms.html" as forms %}

{% extends "base.html" %}
{% block title %}Аккаунт{% endblock title %}

{% block navbar %}
{{ controls::navbar(selected="Account") }}
{% endblock navbar %}

{% block body %}

{% set main_role = user.account.roles | main_role %}

<div class="flex flex-row p-4">
	<div id="leftPanel" class="gap-2 ml-auto flex flex-col items-center">
		<div class="flex flex-col gap-1 items-center justify-center p-2">
			<div>
				<span class="font-bold" style="color: {{ main_role.color }};">{{ user.account.username }}</span>
			</div>

			{{ controls::userAvatar(src=user.account.avatar_url, id="userAvatar") }}

			<div class="flex flex-col gap-2 items-center justify-center">
				<div class="flex gap-0.5 justify-center flex-wrap">
					{% for role in user.account.roles %}
					{{ controls::roleBadge(role=role) }}
					{% endfor %}
				</div>
				<span class="text-sm text-center">
					Присоединился:
					<relative-time class="font-bold text-white" datetime="{{ user.account.created_at }}" prefix="">
						{{ user.account.created_at | date(format="%d.%m.%Y") }}
					</relative-time>
				</span>
			</div>
		</div>

		<hr class="m-0 w-full" />

		<div id="accountMenu" class="w-full p-2">
			{% block menu %}{% endblock menu %}
		</div>
	</div>
	<div id="rightPanel" class="flex flex-col p-4 mr-auto min-w-[60ch]">
		{% block rightPanel %}{% endblock rightPanel %}
	</div>
</div>
{% endblock body %}

{% macro menu(selected) %}
<ul class="menu">
	<a href="profile" class="{% if selected == "Profile" %} selected {% endif %}">
		<i class="fa-solid fa-user"></i> Профиль
	</a>
	<a href="notifications" class="{% if selected == "Notifications" %} selected {% endif %}">
		<i class="fa-solid fa-envelope"></i> Уведомления
	</a>
	<a href="integrations" class="{% if selected == "Integrations" %} selected {% endif %}">
		<i class="fa-solid fa-cubes-stacked"></i> Интеграции
	</a>
	<a href="sessions" class="{% if selected == "Sessions" %} selected {% endif %}">
		<i class="fa-solid fa-pager"></i> Сессии
	</a>
</uL>

<hr />

<ul class="menu">
	<a href="tokens" class="{% if selected == "Tokens" %} selected {% endif %}">
		<i class="fa-solid fa-key"></i> Токены
	</a>
	<a href="journal" class="{% if selected == "Journal" %} selected {% endif %}">
		<i class="fa-solid fa-scroll"></i> Журнал
	</a>
</ul>
{% endmacro menu %}
